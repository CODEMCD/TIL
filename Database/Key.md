# 데이터베이스 키(Key) 종류와 개념
- 키(Key): 키는 데이터베이스에서 조건에 만족하는 튜플을 찾거나 순서대로 정렬할 때 튜플들을 서로 구분할 수 있는 기준이 되는 속성(attribute)을 말한다.
- 속성(Attribute): 릴레이션을 구성하는 각각의 열을 말한다.
- 튜플(Tuple): 릴레이션을 구성하는 각각의 행을 말한다.
  - 파일 구조에서는 레코드와 같은 개념
  - 튜플의 수 = 카디널리티(Cardinality) = 기수 = 대응수
- 릴레이션(Relation): 데이터를 표현하는 2차원 테이블


## 예제 릴레이션
- 학생 릴레이션

| 학번 | 주민번호 | 성명 | 성별 |
|:----:|:--------------:|:------:|:----:|
| 1001 | 930102-1234567 | 김철수 | 남 |
| 1002 | 930203-2134567 | 김연아 | 여 |
| 1003 | 930405-1324567 | 박지성 | 남 |
| 1004 | 930506-2314567 | 홍진경 | 여 |

- 수강 릴레이션

| 학번 | 과목 |
|------|------|
| 1001 | 수학 |
| 1001 | 영어 |
| 1002 | 국어 |
| 1002 | 수학 |
| 1003 | 전산 |
| 1003 | 영어 |


## 특징
- 유일성: 유일한 값을 가져야 한다.
- 최소성: 최소한의 값으로 식별할 수 있어야 한다.
- 불변성: 변하는 값이어선 안된다.
- 존재성: 반드시 존재해야 한다. 누구한텐 있고 누구한테는 없어선 안된다.


## 슈퍼키(Super Key)
- 슈퍼키는 한 릴레이션 내에 있는 **속성들의 집합으로 구성된 키로서** 릴레이션을 구성하는 모든 튜플 중 유일한 튜플을 구분할 수 있는 키를 말한다.
- 유일성 O
- 최소성 X
  - 아래 예시에서 볼 수 있듯이, `학번`으로 튜플을 유일하게 구분할 수 있지만 그 외에도 여러 키를 사용할 수 있으므로 최소성을 만족시키지 못한다.
- 학생 릴레이션 슈퍼키: `학번`, `학번, 주민번호`, `학번, 주민번호, 성명`, `학번, 주민번호, 성명, 성별` 등


## 후보키(Candidate key)
- 릴레이션을 구성하는 속성들 중에서 튜플을 유일하게 식별할 수 있는 속성들의 최소집합을 의미한다.
  - 슈퍼키에서 최소성을 만족시키면 후보키가 된다.
- 모든 릴레이션은 반드시 하나 이상의 후보키를 가져야한다.
- 유일성 O
- 최소성 O
- 학생 릴레이션 후보키: `학번`, `주민번호`


## 기본키(Primary Key, PK)
- 기본키는 후보키 중에서 선택한 주키(Main Key)이다.
- 한 릴레이션에서 특정 튜플을 유일하게 구별할 수 있는 속성이다.
- **Null값을 가질 수 없다.**
- 기본키로 정의된 속성에는 동일한 값이 **중복되어 저장될 수 없다.**
  - 학생 릴레이션에서 `학번`을 기본키로 한다면 첫 번째 열에서 학번으로 사용된 1001이라는 데이터는 다른 속성에서 사용할 수 없다.
- 학생 릴레이션 기본키: `학번` or `주민번호`


## 대체키(Alternate Key)
- 후보키가 둘 이상일 때 기본키를 제외한 나머지 후보키들을 말한다.
- 보조키라고도 한다.


## 외래키(Foreign Key, FK)
- 외래키는 다른 릴레이션의 **기본키를 참조하여** 관계 데이터 모델의 특징인 릴레이션 간의 관계를 표현한다.
- 다른 릴레이션의 기본키를 참조하는 속성이다.
- 참조하고(외래키) 참조되는(기본키) 양쪽 릴레이션의 도메인은 서로 같아야 한다.
- 참조되는 값이 변경되면 참조하는 값도 변경된다.
- NULL 값과 중복 값 등이 허용된다.
- 자기 자신의 기본키를 참조하는 외래키도 가능하다.
- 외래키가 기본키의 일부가 될 수 있다.
- 학생 릴레이션과 수강 릴레이션이 관계를 맺고 있다고 할 때 수강 릴레이션의 외래키는 `학번`이다.
  - 학생 릴레이션에서 `학번`은 기본키


## 유니크키(Unique Key)
- 릴레이션에서 유일한 속성값이다.
- 기본키는 유니크키이다.
- 유니크키는 기본키와 달리 한 릴레이션에서 여러 개가 될 수 있다.
- 유니크키는 NULL값일 수 있다.


## 참고자료
- <http://itwiki.kr/w/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4_%ED%82%A4>
- <https://limkydev.tistory.com/108>
- <https://deftkang.tistory.com/51>
